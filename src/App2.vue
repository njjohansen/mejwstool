<template>
  <div>
    <label for="url">
        Endpoint
        <input v-model="url" />
    </label>
    <label for="access_token">
        Access token
        <input type="text" id="access_token" v-model="accessToken">
    </label>
    <button class="primary"
            @click="connect"
            :disabled="isConnecting || isConnected">
        Connect
    </button>
    <button @click="disconnect" :disabled="!isConnected">
        Disconnect
    </button>
    <hr />
    <div v-for="(arr, k) in queries" :key="k">
      <div>{{ k }}</div>
      <subscription 
        v-for="(q, i) in arr"
        :key="i"
        :connection="connection" 
        :rest-url="restUrl" 
        :accessToken="accessToken"
        style="display:flex;justify-content:space-between"
        :query="q" 
        :subscription-id="'my-subscription_' + k + '_' + i"
        ></subscription>
        <hr />
    </div>
  </div>
</template>

<script>
import Subscription from './components/Subscription.vue'
const signalR = require("@microsoft/signalr");

export default {  
    components: {
        Subscription
    },
    data: () => {
      return {
        connection: null,
        url: "https://api.cph-test3.airhart.aero/qs/api",
        //url: "http://localhost:5000/external/api",
        accessToken: "",
      }
    },
    computed: {
      isConnecting () {
          return this.connection !== null && this.connection.state == "Connecting";
      },
      isConnected: function () {
          return this.connection !== null && this.connection.state == "Connected";
      },
      restUrl () {
        return this.url + "/odata/AODB"
      },
      queries () {
        let arr = {}

        arr["Flight list - CPH Arr/Dep [Mixed]"] = [
          "flight_legs?$filter=(Attributes/operational_status/Value ne 'NOP' and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S'))))&$select=Attributes/arrival_station_iata/Value,Attributes/arrival_station_iata/Received,Attributes/actual_startup_requested_time/Value,Attributes/actual_startup_requested_time/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/deleted/Value,Attributes/deleted/Received,Attributes/cancelled/Value,Attributes/cancelled/Received,Attributes/estimated_off_block_time/Value,Attributes/estimated_off_block_time/Received,Attributes/actual_ground_return_time/Value,Attributes/actual_ground_return_time/Received,Attributes/return_to_ramp/Value,Attributes/return_to_ramp/Received,Attributes/actual_aborted_landing_time/Value,Attributes/actual_aborted_landing_time/Received,Attributes/actual_aborted_take_off_time/Value,Attributes/actual_aborted_take_off_time/Received,Attributes/actual_diversion_time/Value,Attributes/actual_diversion_time/Received,Attributes/actual_airborne_return_time/Value,Attributes/actual_airborne_return_time/Received,Attributes/actual_gate_closed/Value,Attributes/actual_gate_closed/Received,Attributes/estimated_time_of_departure/Value,Attributes/estimated_time_of_departure/Received,Attributes/service_type/Value,Attributes/service_type/Received,Attributes/actual_go_to_gate/Value,Attributes/actual_go_to_gate/Received,Attributes/actual_boarding_start/Value,Attributes/actual_boarding_start/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/estimated_in_block_time/Value,Attributes/estimated_in_block_time/Received,Attributes/actual_in_block_time/Value,Attributes/actual_in_block_time/Received,Attributes/next_info/Value,Attributes/next_info/Received,Attributes/nmoc_status/Value,Attributes/nmoc_status/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/geopol_schengen/Value,Attributes/geopol_schengen/Received,Attributes/security_level/Value,Attributes/security_level/Received,Attributes/arrival_gate_traffic_type_mismatch/Value,Attributes/arrival_gate_traffic_type_mismatch/Received,Attributes/departure_gate_traffic_type_mismatch/Value,Attributes/departure_gate_traffic_type_mismatch/Received,Attributes/arrival_gate_security_level_mismatch/Value,Attributes/arrival_gate_security_level_mismatch/Received,Attributes/departure_gate_security_level_mismatch/Value,Attributes/departure_gate_security_level_mismatch/Received,Attributes/arrival_stand_gate_traffic_type_mismatch/Value,Attributes/arrival_stand_gate_traffic_type_mismatch/Received,Attributes/departure_stand_gate_traffic_type_mismatch/Value,Attributes/departure_stand_gate_traffic_type_mismatch/Received,Attributes/geopol_eu/Value,Attributes/geopol_eu/Received,Attributes/hide_flight_public/Value,Attributes/hide_flight_public/Received,Attributes/hide_estimated_departure_time_fids/Value,Attributes/hide_estimated_departure_time_fids/Received,Attributes/hide_flight_staff/Value,Attributes/hide_flight_staff/Received,Attributes/alert_highest_severity/Value,Attributes/alert_highest_severity/Received,Attributes/cdm_departure_status/Value,Attributes/cdm_departure_status/Received,Attributes/has_requested_deicing/Value,Attributes/has_requested_deicing/Received,Attributes/arrival_pax_bus_needed/Value,Attributes/arrival_pax_bus_needed/Received,Attributes/departure_pax_bus_needed/Value,Attributes/departure_pax_bus_needed/Received,Attributes/best_in_block_time_type/Value,Attributes/best_in_block_time_type/Received,Attributes/best_off_block_time_type/Value,Attributes/best_off_block_time_type/Received,Attributes/best_operation_time_type_arrival/Value,Attributes/best_operation_time_type_arrival/Received,Attributes/best_operation_time_type_departure/Value,Attributes/best_operation_time_type_departure/Received,Attributes/landing_time_type/Value,Attributes/landing_time_type/Received,Attributes/actual_landing_time/Value,Attributes/actual_landing_time/Received,Attributes/actual_take_off_time/Value,Attributes/actual_take_off_time/Received,Attributes/arrival_stand_occupied/Value,Attributes/arrival_stand_occupied/Received,Attributes/blnd_service_count/Value,Attributes/blnd_service_count/Received,Attributes/deaf_service_count/Value,Attributes/deaf_service_count/Received,Attributes/dpna_service_count/Value,Attributes/dpna_service_count/Received,Attributes/lang_service_count/Value,Attributes/lang_service_count/Received,Attributes/maas_service_count/Value,Attributes/maas_service_count/Received,Attributes/meda_service_count/Value,Attributes/meda_service_count/Received,Attributes/stcr_service_count/Value,Attributes/stcr_service_count/Received,Attributes/wchr_service_count/Value,Attributes/wchr_service_count/Received,Attributes/wchs_service_count/Value,Attributes/wchs_service_count/Received,Attributes/wchc_service_count/Value,Attributes/wchc_service_count/Received,Attributes/oxyg_service_count/Value,Attributes/oxyg_service_count/Received,Attributes/avih_service_count/Value,Attributes/avih_service_count/Received,Attributes/esan_service_count/Value,Attributes/esan_service_count/Received,Attributes/petc_service_count/Value,Attributes/petc_service_count/Received,Attributes/svan_service_count/Value,Attributes/svan_service_count/Received,Attributes/stop_marshaller_required/Value,Attributes/stop_marshaller_required/Received,Attributes/arrival_follow_me_guide/Value,Attributes/arrival_follow_me_guide/Received,Attributes/departure_follow_me_guide/Value,Attributes/departure_follow_me_guide/Received,Attributes/arrival_marshaller_required/Value,Attributes/arrival_marshaller_required/Received,Attributes/departure_marshaller_required/Value,Attributes/departure_marshaller_required/Received,Attributes/parking_special/Value,Attributes/parking_special/Received,Attributes/arrival_jetbride_inop_condition/Value,Attributes/arrival_jetbride_inop_condition/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/stand/Value,Attributes/stand/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Attributes/runway/Value,Attributes/runway/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/turn_to/Value,Attributes/turn_to/Received,Attributes/turn_from/Value,Attributes/turn_from/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/arrival_runway/Value,Attributes/arrival_runway/Received,Attributes/departure_runway/Value,Attributes/departure_runway/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/landing_time/Value,Attributes/landing_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/arrival_baggage_belt/Value,Attributes/arrival_baggage_belt/Received,Attributes/actual_first_bag_time/Value,Attributes/actual_first_bag_time/Received,Attributes/actual_last_bag_time/Value,Attributes/actual_last_bag_time/Received,Attributes/checkin_counter_allocation/Value,Attributes/checkin_counter_allocation/Received,Attributes/estimated_total_passenger_count/Value,Attributes/estimated_total_passenger_count/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/best_in_block_time/Value,Attributes/best_in_block_time/Received,Attributes/best_off_block_time/Value,Attributes/best_off_block_time/Received,Attributes/estimated_boarding_start/Value,Attributes/estimated_boarding_start/Received,Attributes/estimated_gate_closed/Value,Attributes/estimated_gate_closed/Received,Attributes/estimated_go_to_gate/Value,Attributes/estimated_go_to_gate/Received,Attributes/departure_station_iata/Value,Attributes/departure_station_iata/Received,Attributes/origin_station_icao/Value,Attributes/origin_station_icao/Received,Attributes/final_station_icao/Value,Attributes/final_station_icao/Received,Attributes/departure_station_icao/Value,Attributes/departure_station_icao/Received,Attributes/arrival_station_icao/Value,Attributes/arrival_station_icao/Received,Attributes/minimum_turn_around_time/Value,Attributes/minimum_turn_around_time/Received,Id,Relations,Attributes/route_iata_enriched/Value,Alerts"
        ];

        arr["Flight list - CPH Visits"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(Attributes/arrival_station_iata/Value eq 'CPH' and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S')))) & $select=Attributes/arrival_station_iata/Value,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_off_block_time/Value,Id",
          "visits?$top=500&$filter=(((Relations/inboundFlight/Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Relations/inboundFlight/Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Relations/outboundFlight/Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Relations/outboundFlight/Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S')))&$select=Attributes/placeholder_internal/Value,Attributes/placeholder_internal/Received,Id,Alerts&$expand=Relations/inboundFlight($select=Id,Alerts),Relations/outboundFlight($select=Id,Relations,Alerts)",
          "flight_legs?$filter=(Attributes/departure_station_iata/Value eq 'CPH' and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S')))) & $select=Attributes/departure_station_iata/Value,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_off_block_time/Value,Id"
        ];
        
        arr["Flight list - EXT - Operations Control [Mixed]"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S')))&$select=Attributes/arrival_station_iata/Value,Attributes/arrival_station_iata/Received,Attributes/cancelled/Value,Attributes/cancelled/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/geopol_schengen/Value,Attributes/geopol_schengen/Received,Attributes/security_level/Value,Attributes/security_level/Received,Attributes/stand/Value,Attributes/stand/Received,Attributes/geopol_eu/Value,Attributes/geopol_eu/Received,Attributes/hide_flight_public/Value,Attributes/hide_flight_public/Received,Attributes/hide_estimated_departure_time_fids/Value,Attributes/hide_estimated_departure_time_fids/Received,Attributes/alert_highest_severity/Value,Attributes/alert_highest_severity/Received,Attributes/has_requested_deicing/Value,Attributes/has_requested_deicing/Received,Attributes/arrival_pax_bus_needed/Value,Attributes/arrival_pax_bus_needed/Received,Attributes/departure_pax_bus_needed/Value,Attributes/departure_pax_bus_needed/Received,Attributes/best_operation_time_type_arrival/Value,Attributes/best_operation_time_type_arrival/Received,Attributes/best_operation_time_type_departure/Value,Attributes/best_operation_time_type_departure/Received,Attributes/actual_landing_time/Value,Attributes/actual_landing_time/Received,Attributes/actual_take_off_time/Value,Attributes/actual_take_off_time/Received,Attributes/actual_startup_requested_time/Value,Attributes/actual_startup_requested_time/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Attributes/runway/Value,Attributes/runway/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/actual_ground_return_time/Value,Attributes/actual_ground_return_time/Received,Attributes/return_to_ramp/Value,Attributes/return_to_ramp/Received,Attributes/actual_airborne_return_time/Value,Attributes/actual_airborne_return_time/Received,Attributes/actual_aborted_take_off_time/Value,Attributes/actual_aborted_take_off_time/Received,Attributes/actual_aborted_landing_time/Value,Attributes/actual_aborted_landing_time/Received,Attributes/turn_from/Value,Attributes/turn_from/Received,Attributes/turn_to/Value,Attributes/turn_to/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/probable_in_block_time/Value,Attributes/probable_in_block_time/Received,Attributes/probable_off_block_time/Value,Attributes/probable_off_block_time/Received,Attributes/next_info/Value,Attributes/next_info/Received,Attributes/estimated_in_block_time/Value,Attributes/estimated_in_block_time/Received,Attributes/estimated_off_block_time/Value,Attributes/estimated_off_block_time/Received,Attributes/estimated_pax_off_block_time/Value,Attributes/estimated_pax_off_block_time/Received,Attributes/actual_in_block_time/Value,Attributes/actual_in_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/arrival_runway/Value,Attributes/arrival_runway/Received,Attributes/departure_runway/Value,Attributes/departure_runway/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/actual_startup_approval_time/Value,Attributes/actual_startup_approval_time/Received,Attributes/operational_status/Value,Attributes/operational_status/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Flight list - EXT - Operations Control [Visits]"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S')))&$select=Attributes/arrival_station_iata/Value,Attributes/arrival_station_iata/Received,Attributes/cancelled/Value,Attributes/cancelled/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/geopol_schengen/Value,Attributes/geopol_schengen/Received,Attributes/security_level/Value,Attributes/security_level/Received,Attributes/stand/Value,Attributes/stand/Received,Attributes/geopol_eu/Value,Attributes/geopol_eu/Received,Attributes/hide_flight_public/Value,Attributes/hide_flight_public/Received,Attributes/hide_estimated_departure_time_fids/Value,Attributes/hide_estimated_departure_time_fids/Received,Attributes/alert_highest_severity/Value,Attributes/alert_highest_severity/Received,Attributes/has_requested_deicing/Value,Attributes/has_requested_deicing/Received,Attributes/arrival_pax_bus_needed/Value,Attributes/arrival_pax_bus_needed/Received,Attributes/departure_pax_bus_needed/Value,Attributes/departure_pax_bus_needed/Received,Attributes/best_operation_time_type_arrival/Value,Attributes/best_operation_time_type_arrival/Received,Attributes/best_operation_time_type_departure/Value,Attributes/best_operation_time_type_departure/Received,Attributes/actual_landing_time/Value,Attributes/actual_landing_time/Received,Attributes/actual_take_off_time/Value,Attributes/actual_take_off_time/Received,Attributes/actual_startup_requested_time/Value,Attributes/actual_startup_requested_time/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Attributes/runway/Value,Attributes/runway/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/actual_ground_return_time/Value,Attributes/actual_ground_return_time/Received,Attributes/return_to_ramp/Value,Attributes/return_to_ramp/Received,Attributes/actual_airborne_return_time/Value,Attributes/actual_airborne_return_time/Received,Attributes/actual_aborted_take_off_time/Value,Attributes/actual_aborted_take_off_time/Received,Attributes/actual_aborted_landing_time/Value,Attributes/actual_aborted_landing_time/Received,Attributes/turn_from/Value,Attributes/turn_from/Received,Attributes/turn_to/Value,Attributes/turn_to/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/probable_in_block_time/Value,Attributes/probable_in_block_time/Received,Attributes/probable_off_block_time/Value,Attributes/probable_off_block_time/Received,Attributes/next_info/Value,Attributes/next_info/Received,Attributes/estimated_in_block_time/Value,Attributes/estimated_in_block_time/Received,Attributes/estimated_off_block_time/Value,Attributes/estimated_off_block_time/Received,Attributes/estimated_pax_off_block_time/Value,Attributes/estimated_pax_off_block_time/Received,Attributes/actual_in_block_time/Value,Attributes/actual_in_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/arrival_runway/Value,Attributes/arrival_runway/Received,Attributes/departure_runway/Value,Attributes/departure_runway/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/actual_startup_approval_time/Value,Attributes/actual_startup_approval_time/Received,Attributes/operational_status/Value,Attributes/operational_status/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Flight list - CPH - Ground Coordinator"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT24H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT24H0M0S')))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/cancelled/Value,Attributes/cancelled/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/alert_total_number/Value,Attributes/alert_total_number/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/turn_to/Value,Attributes/turn_to/Received,Attributes/turn_from/Value,Attributes/turn_from/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/traffic_type/Value,Attributes/traffic_type/Received,Attributes/security_level/Value,Attributes/security_level/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/arrival_runway/Value,Attributes/arrival_runway/Received,Attributes/departure_runway/Value,Attributes/departure_runway/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/landing_time/Value,Attributes/landing_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/estimated_time_of_departure/Value,Attributes/estimated_time_of_departure/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/target_startup_approval_time/Value,Attributes/target_startup_approval_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/most_penalising_regulation_reason/Value,Attributes/most_penalising_regulation_reason/Received,Attributes/service_type/Value,Attributes/service_type/Received,Attributes/primary_ground_handler_arrival/Value,Attributes/primary_ground_handler_arrival/Received,Attributes/primary_ground_handler_departure/Value,Attributes/primary_ground_handler_departure/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Attributes/parking_special/Value,Attributes/parking_special/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Dashboard - CPH - INOPS & Service Messags"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id"
        ];

        arr["Flight list - EXT - Boarding"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(Attributes/operational_status/Value ne 'NOP' and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S'))))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/route_iata_enriched/Value,Attributes/route_iata_enriched/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/estimated_pax_off_block_time/Value,Attributes/estimated_pax_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Id,Relations,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "visits?$top=500&$filter=((Relations/inboundFlight/Attributes/operational_status/Value ne 'NOP' or Relations/outboundFlight/Attributes/operational_status/Value ne 'NOP') and (((Relations/inboundFlight/Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Relations/inboundFlight/Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Relations/outboundFlight/Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Relations/outboundFlight/Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S'))))&$select=Id,Alerts&$expand=Relations/inboundFlight($select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Attributes/route_iata_enriched/Value,Attributes/route_iata_enriched/Received,Id,Alerts),Relations/outboundFlight($select=Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/route_iata_enriched/Value,Attributes/route_iata_enriched/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/next_info/Value,Attributes/next_info/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/estimated_go_to_gate/Value,Attributes/estimated_go_to_gate/Received,Attributes/estimated_boarding_start/Value,Attributes/estimated_boarding_start/Received,Attributes/estimated_gate_closed/Value,Attributes/estimated_gate_closed/Received,Attributes/estimated_time_of_departure/Value,Attributes/estimated_time_of_departure/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/target_startup_approval_time/Value,Attributes/target_startup_approval_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Attributes/aircraft_visit_status/Value,Attributes/aircraft_visit_status/Received,Id,Relations,Alerts)"
        ];

        arr["Flight list - CPH - Towings"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=(((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S')))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "ground_legs?$filter=(Attributes/deleted/Value eq false and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT24H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT24H0M0S'))))&$select=Attributes/operator_iata/Value,Attributes/operator_iata/Received,Attributes/flight_number_iata/Value,Attributes/flight_number_iata/Received,Attributes/operational_suffix/Value,Attributes/operational_suffix/Received,Attributes/ext_identifier_sequencenumber/Value,Attributes/ext_identifier_sequencenumber/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/aircraft_type_iata/Value,Attributes/aircraft_type_iata/Received,Attributes/leg_remark_freetext/Value,Attributes/leg_remark_freetext/Received,Attributes/from_stand/Value,Attributes/from_stand/Received,Attributes/to_stand/Value,Attributes/to_stand/Received,Attributes/stop_line/Value,Attributes/stop_line/Received,Attributes/to_stand_occupied/Value,Attributes/to_stand_occupied/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/actual_in_block_time/Value,Attributes/actual_in_block_time/Received,Attributes/duration/Value,Attributes/duration/Received,Attributes/towingindicator/Value,Attributes/towingindicator/Received,Attributes/follow_me_guide/Value,Attributes/follow_me_guide/Received,Id",
          "flight_legs?$filter=(((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S')))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_stand_type/Value,Attributes/arrival_stand_type/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Flight list - CPH - Deicing"] = [
          "flight_legs?$filter=(((((Attributes/has_requested_deicing/Value eq true and Attributes/arrival_station_iata/Value ne 'CPH') and tolower(Attributes/deicing_platform/Value) eq 'a') and Attributes/actual_end_of_deicing_time/Value eq null) and Attributes/cancelled/Value eq false) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S'))))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/deicing_handler_arrival/Value,Attributes/deicing_handler_arrival/Received,Attributes/deicing_handler_departure/Value,Attributes/deicing_handler_departure/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "flight_legs?$filter=(((((Attributes/has_requested_deicing/Value eq true and Attributes/arrival_station_iata/Value ne 'CPH') and tolower(Attributes/deicing_platform/Value) eq 'b') and Attributes/actual_end_of_deicing_time/Value eq null) and Attributes/cancelled/Value eq false) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S'))))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/deicing_handler_arrival/Value,Attributes/deicing_handler_arrival/Received,Attributes/deicing_handler_departure/Value,Attributes/deicing_handler_departure/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "flight_legs?$filter=(((((Attributes/has_requested_deicing/Value eq true and Attributes/arrival_station_iata/Value ne 'CPH') and tolower(Attributes/deicing_platform/Value) eq 'v') and Attributes/actual_end_of_deicing_time/Value eq null) and Attributes/cancelled/Value eq false) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S'))))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/deicing_handler_arrival/Value,Attributes/deicing_handler_arrival/Received,Attributes/deicing_handler_departure/Value,Attributes/deicing_handler_departure/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "flight_legs?$filter=(((Attributes/arrival_station_iata/Value ne 'CPH' and ((Attributes/operational_status/Value ne 'NOP') or (Attributes/operational_status/Value ne 'DX'))) and Attributes/actual_take_off_time/Value eq null) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT5H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT5H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT5H0M0S'))))&$select=Attributes/has_requested_deicing/Value,Attributes/has_requested_deicing/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/aerodrome_reference_code_icao/Value,Attributes/aerodrome_reference_code_icao/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/sequenced_deicing_platform/Value,Attributes/sequenced_deicing_platform/Received,Attributes/target_off_block_time/Value,Attributes/target_off_block_time/Received,Attributes/target_startup_approval_time/Value,Attributes/target_startup_approval_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/calculated_take_off_time/Value,Attributes/calculated_take_off_time/Received,Attributes/scheduled_commencement_of_deicing_time/Value,Attributes/scheduled_commencement_of_deicing_time/Received,Attributes/actual_commencement_of_deicing_time/Value,Attributes/actual_commencement_of_deicing_time/Received,Attributes/actual_end_of_deicing_time/Value,Attributes/actual_end_of_deicing_time/Received,Attributes/deicing_handler_arrival/Value,Attributes/deicing_handler_arrival/Received,Attributes/deicing_handler_departure/Value,Attributes/deicing_handler_departure/Received,Attributes/deicing_pad/Value,Attributes/deicing_pad/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Flight list - CPH - Arrival Sequence"] = [
          "flight_legs?$filter=(((((Attributes/operational_status/Value ne 'NOP') or (Attributes/operational_status/Value ne 'DX')) and Attributes/arrival_station_iata/Value eq 'CPH') and Attributes/estimated_landing_time/Value eq null) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT2H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT2H0M0S'))))&$select=Attributes/arrival_station_iata/Value,Attributes/arrival_station_iata/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/cancelled/Value,Attributes/cancelled/Received,Attributes/origin_station_iata/Value,Attributes/origin_station_iata/Received,Attributes/final_station_iata/Value,Attributes/final_station_iata/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/geopol_schengen/Value,Attributes/geopol_schengen/Received,Attributes/security_level/Value,Attributes/security_level/Received,Attributes/stand/Value,Attributes/stand/Received,Attributes/geopol_eu/Value,Attributes/geopol_eu/Received,Attributes/hide_flight_public/Value,Attributes/hide_flight_public/Received,Attributes/hide_estimated_departure_time_fids/Value,Attributes/hide_estimated_departure_time_fids/Received,Attributes/alert_highest_severity/Value,Attributes/alert_highest_severity/Received,Attributes/has_requested_deicing/Value,Attributes/has_requested_deicing/Received,Attributes/arrival_pax_bus_needed/Value,Attributes/arrival_pax_bus_needed/Received,Attributes/departure_pax_bus_needed/Value,Attributes/departure_pax_bus_needed/Received,Attributes/best_operation_time_type_arrival/Value,Attributes/best_operation_time_type_arrival/Received,Attributes/best_operation_time_type_departure/Value,Attributes/best_operation_time_type_departure/Received,Attributes/actual_landing_time/Value,Attributes/actual_landing_time/Received,Attributes/actual_take_off_time/Value,Attributes/actual_take_off_time/Received,Attributes/actual_startup_requested_time/Value,Attributes/actual_startup_requested_time/Received,Attributes/actual_aborted_landing_time/Value,Attributes/actual_aborted_landing_time/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/displayed_status/Value,Attributes/displayed_status/Received,Attributes/arrival_runway/Value,Attributes/arrival_runway/Received,Attributes/arrival_stand/Value,Attributes/arrival_stand/Received,Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/turn_to/Value,Attributes/turn_to/Received,Attributes/turn_from/Value,Attributes/turn_from/Received,Attributes/route_iata_enriched/Value,Attributes/route_iata_enriched/Received,Attributes/standard_arrival_procedure/Value,Attributes/standard_arrival_procedure/Received,Attributes/departure_runway/Value,Attributes/departure_runway/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/arrival_gate/Value,Attributes/arrival_gate/Received,Attributes/departure_gate/Value,Attributes/departure_gate/Received,Attributes/estimated_landing_time/Value,Attributes/estimated_landing_time/Received,Attributes/estimated_taxi_in_duration/Value,Attributes/estimated_taxi_in_duration/Received,Attributes/estimated_in_block_time/Value,Attributes/estimated_in_block_time/Received,Attributes/actual_in_block_time/Value,Attributes/actual_in_block_time/Received,Attributes/arrival_baggage_belt/Value,Attributes/arrival_baggage_belt/Received,Attributes/service_type/Value,Attributes/service_type/Received,Id,Relations,Attributes/departure_station_iata/Value,Alerts"
        ];

        arr["Flight list - CPH - Load & Transfer info"] = [
          "flight_legs?$filter=(Attributes/operational_status/Value ne 'NOP' and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S'))))&$select=Attributes/call_sign/Value,Attributes/call_sign/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts,Attributes/flight_identifier/Value",
          "flight_legs?$filter=((Attributes/operational_status/Value ne 'NOP' and Attributes/arrival_station_iata/Value eq 'CPH') and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT2H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S'))))&$select=Attributes/call_sign/Value,Attributes/call_sign/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts,Attributes/flight_identifier/Value"
        ];

        arr["Flight list - EXT - Fuel"] = [
          "operational_events?$filter=((Attributes/start/Value lt now() add duration'P0DT24H0M0S') and (Attributes/end/Value gt now() sub duration'P0DT0H0M0S'))&$select=Attributes/ui_name,Attributes/ui_type,Attributes/ui_function,Attributes/start,Attributes/end,Attributes/last_updated,Attributes/summary,Attributes/is_recurring_event,Id",
          "flight_legs?$filter=((((Attributes/operational_status/Value ne 'NOP') or (Attributes/operational_status/Value ne 'DX')) and (contains(tolower(Attributes/delays_enriched/Value),'36') or contains(tolower(Attributes/delays_enriched/Value),'gf'))) and (((Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_in_block_time/Value le now() add duration'P0DT2H0M0S')) or ((Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT12H0M0S') and (Attributes/scheduled_off_block_time/Value le now() add duration'P0DT2H0M0S'))))&$select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/actual_off_block_time/Value,Attributes/actual_off_block_time/Received,Attributes/delays_enriched/Value,Attributes/delays_enriched/Received,Id,Relations,Attributes/route_iata_enriched/Value,Attributes/arrival_station_iata/Value,Attributes/departure_station_iata/Value,Alerts",
          "visits?$top=500&$filter=((((Relations/inboundFlight/Attributes/operational_status/Value ne 'DX') or (Relations/inboundFlight/Attributes/operational_status/Value ne 'NOP')) or ((Relations/outboundFlight/Attributes/operational_status/Value ne 'DX') or (Relations/outboundFlight/Attributes/operational_status/Value ne 'NOP'))) and (((Relations/inboundFlight/Attributes/scheduled_in_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Relations/inboundFlight/Attributes/scheduled_in_block_time/Value le now() add duration'P0DT12H0M0S')) or ((Relations/outboundFlight/Attributes/scheduled_off_block_time/Value ge now() sub duration'P0DT1H0M0S') and (Relations/outboundFlight/Attributes/scheduled_off_block_time/Value le now() add duration'P0DT12H0M0S'))))&$select=Id,Alerts&$expand=Relations/inboundFlight($select=Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/scheduled_in_block_time/Value,Attributes/scheduled_in_block_time/Received,Attributes/best_operation_time_arrival/Value,Attributes/best_operation_time_arrival/Received,Id,Alerts),Relations/outboundFlight($select=Attributes/registration/Value,Attributes/registration/Received,Attributes/type_iata/Value,Attributes/type_iata/Received,Attributes/flight_identifier/Value,Attributes/flight_identifier/Received,Attributes/call_sign/Value,Attributes/call_sign/Received,Attributes/scheduled_off_block_time/Value,Attributes/scheduled_off_block_time/Received,Attributes/best_operation_time_departure/Value,Attributes/best_operation_time_departure/Received,Attributes/departure_stand/Value,Attributes/departure_stand/Received,Attributes/ramp_fuel/Value,Attributes/ramp_fuel/Received,Attributes/handler_remarks/Value,Attributes/handler_remarks/Received,Attributes/fuel_attachment_type/Value,Attributes/fuel_attachment_type/Received,Attributes/primary_ground_handler_departure/Value,Attributes/primary_ground_handler_departure/Received,Id,Relations,Alerts)"
        ];

        return arr
      }
    },
    methods: {
        disconnect() {
          if (!this.isConnected) return;
          this.connection.stop()
        },
         connect() {
            this.connection = new signalR
                .HubConnectionBuilder()
                .withUrl(this.url + "/ws/subscription",
                    {
                        transport: signalR.HttpTransportType.WebSockets,
                        skipNegotiation: true,
                        accessTokenFactory: () => {
                            return this.accessToken
                        }
                    })
                .configureLogging(signalR.LogLevel.Debug)
                .build();

            this.connection.onclose(() => {
                console.log("Connection closed");
            });

            return this
                .connection
                .start()
                .then(() => {
                    console.log("connected");
                })
                .catch(e => console.log("connection start error", e));
        }
    }
}
</script>

<style>
label {
  display:block;
}

input {
  width: 100%;
}
</style>
